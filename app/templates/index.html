<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê—É–¥—ñ–æ –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü—ñ—è | Audio Transcription</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
<div class="language-switcher">
    <button id="lang-uk" class="lang-btn active" data-lang="uk">üá∫üá¶ –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</button>
    <button id="lang-en" class="lang-btn" data-lang="en">üá¨üáß English</button>
</div>

<div class="container">
    <h1 class="main-title" data-lang-key="page-title">–ê—É–¥—ñ–æ –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü—ñ—è</h1>

    <!-- API Key Field (Optional) -->
    <div class="api-key-container">
        <label for="api-key" data-lang-key="api-key">API –ö–ª—é—á (–Ω–µ–æ–±–æ–≤'—è–∑–∫–æ–≤–æ):</label>
        <div class="input-with-button">
            <input type="password" id="api-key" name="api-key" placeholder="–í–≤–µ–¥—ñ—Ç—å API –∫–ª—é—á...">
            <button id="save-api-key" class="btn-primary" data-lang-key="save-api-key">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
        </div>
        <span id="api-key-status" class="hidden success-text" data-lang-key="api-key-saved">–ó–±–µ—Ä–µ–∂–µ–Ω–æ</span>
    </div>

    <div class="tabs">
        <div class="tab active" data-tab="file-upload" data-lang-key="tab-file">–§–∞–π–ª</div>
        <div class="tab" data-tab="url-upload" data-lang-key="tab-url">URL</div>
        <div class="tab" data-tab="reconstruct" data-lang-key="tab-reconstruct">–†–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è</div>
        <div class="tab" data-tab="tts-stream" data-lang-key="tab-tts">TTS –°—Ç—Ä—ñ–º</div>
    </div>

    <!-- File Upload Form -->
    <form id="upload-form" class="tab-content active form-card" enctype="multipart/form-data">
        <div class="form-group">
            <label for="file" data-lang-key="choose-file">–û–±–µ—Ä—ñ—Ç—å MP3 –§–∞–π–ª:</label>
            <input type="file" id="file" name="file" accept=".mp3" required>
        </div>

        <div class="form-group">
            <label for="lang" data-lang-key="languages">–ú–æ–≤–∏ (—á–µ—Ä–µ–∑ –∫–æ–º—É, –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è: Ukrainian):</label>
            <input type="text" id="lang" name="lang" value="Ukrainian">
        </div>

        <div class="form-group">
            <label for="keywords" data-lang-key="keywords">–ö–ª—é—á–æ–≤—ñ —Å–ª–æ–≤–∞ (—á–µ—Ä–µ–∑ –∫–æ–º—É):</label>
            <input type="text" id="keywords" name="keywords" value="–ö–∏—ó–≤,–•–∞—Ä–∫—ñ–≤,–û–¥–µ—Å–∞">
        </div>

        <div class="form-group">
            <label for="confidence_threshold" data-lang-key="confidence-threshold">–ü–æ—Ä—ñ–≥ –¥–æ–≤—ñ—Ä–∏ (–∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è:
                65):</label>
            <input type="number" id="confidence_threshold" name="confidence_threshold" value="65" min="0" max="100">
        </div>

        <div class="form-group">
            <label for="pre_process_file" data-lang-key="pre_process_file">–ü—Ä–µ –ø—Ä–æ—Ü–µ—Å—Å—ñ–Ω–≥ —Ñ–∞–π–ª—É:</label>
            <select id="pre_process_file" name="pre_process_file" class="select-dropdown">
                <option value="false" data-lang-key="pre_process_file-false">–ù—ñ</option>
                <option value="true" data-lang-key="pre_process_file-true">–¢–∞–∫</option>
            </select>
        </div>

        <div class="form-group">
            <label for="model" data-lang-key="model">–ú–æ–¥–µ–ª—å–∫–∞:</label>
            <select id="model" name="model" class="select-dropdown">
                <option value="tiny" data-lang-key="model-tiny">–ö—Ä–∏—Ö—ñ—Ç–∫–∞</option>
                <option value="base" data-lang-key="model-base">–ë–∞–∑–æ–≤–∞</option>
                <option value="small" data-lang-key="model-small">–ú–∞–ª–µ–Ω—å–∫–∞</option>
                <option value="medium" data-lang-key="model-medium">–°–µ—Ä–µ–¥–Ω—è</option>
                <option value="large" data-lang-key="model-large">–í–µ–ª–∏–∫–∞</option>
                <option value="large-v2" data-lang-key="model-large-v2">–í–µ–ª–∏–∫–∞ v2</option>
                <option value="large-v3" data-lang-key="model-large-v3">–í–µ–ª–∏–∫–∞ v3</option>
                <option value="large-v3-turbo" data-lang-key="model-large-v3-turbo">–í–µ–ª–∏–∫–∞ v3 Turbo</option>
                <option value="turbo" data-lang-key="model-turbo">–¢—É—Ä–±–æ</option>
            </select>
        </div>

        <button type="submit" class="btn-submit" data-lang-key="upload-button">–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏</button>
    </form>

    <!-- TTS Streaming Form -->
    <form id="tts-form" class="tab-content form-card">
        <div class="form-group">
            <label for="tts-text" data-lang-key="tts-text">–¢–µ–∫—Å—Ç –¥–ª—è TTS:</label>
            <textarea id="tts-text" name="tts_text" required
                      placeholder="–í–≤–µ–¥—ñ—Ç—å —Ç–µ–∫—Å—Ç –¥–ª—è –≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è..."
                      data-lang-key="tts-placeholder"></textarea>
        </div>
        <div class="form-group">
            <label for="tts-lang" data-lang-key="tts-lang">–ú–æ–≤–∞ (–Ω–µ–æ–±–æ–≤'—è–∑–∫–æ–≤–æ):</label>
            <select id="tts-lang" name="tts_lang" class="select-dropdown">
                <option value="" data-lang-key="tts-lang-default">–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º</option>
                <option value="uk" data-lang-key="tts-lang-uk">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</option>
                <option value="en" data-lang-key="tts-lang-en">–ê–Ω–≥–ª—ñ–π—Å—å–∫–∞</option>
            </select>
        </div>
        <div class="form-group checkboxes">
            <label class="checkbox-container">
                <input type="checkbox" id="tts-download" name="tts_download">
                <span data-lang-key="tts-download-option">–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –∞—É–¥—ñ–æ (–∑–∞–º—ñ—Å—Ç—å –≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è)</span>
            </label>
        </div>
        <div class="form-group filename-container" style="display: none;">
            <label for="tts-filename" data-lang-key="tts-filename">–ù–∞–∑–≤–∞ —Ñ–∞–π–ª—É:</label>
            <input type="text" id="tts-filename" name="tts_filename" value="speech"
                   placeholder="–ù–∞–∑–≤–∞ —Ñ–∞–π–ª—É (–±–µ–∑ .mp3)" data-lang-key="tts-filename-placeholder">
        </div>
        <button type="submit" class="btn-submit" data-lang-key="tts-button">–í—ñ–¥—Ç–≤–æ—Ä–∏—Ç–∏ TTS</button>
        <div class="audio-container">
            <audio id="tts-audio" controls style="width: 100%; margin-top: 1rem; display: none;"></audio>
        </div>
    </form>

    <!-- URL Form -->
    <form id="url-form" class="tab-content form-card" enctype="application/json">
        <div class="form-group">
            <label for="file_url" data-lang-key="url-file">URL MP3 —Ñ–∞–π–ª—É:</label>
            <input type="url" id="file_url" name="file_url" required placeholder="https://example.com/audio.mp3">
        </div>

        <div class="form-group">
            <label for="url_lang" data-lang-key="url-languages">–ú–æ–≤–∏ (—á–µ—Ä–µ–∑ –∫–æ–º—É, –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è: Ukrainian):</label>
            <input type="text" id="url_lang" name="url_lang" value="Ukrainian">
        </div>

        <div class="form-group">
            <label for="url_keywords" data-lang-key="url-keywords">–ö–ª—é—á–æ–≤—ñ —Å–ª–æ–≤–∞ (—á–µ—Ä–µ–∑ –∫–æ–º—É):</label>
            <input type="text" id="url_keywords" name="url_keywords" value="–ö–∏—ó–≤,–•–∞—Ä–∫—ñ–≤,–û–¥–µ—Å–∞">
        </div>

        <div class="form-group">
            <label for="url_confidence_threshold" data-lang-key="url-confidence-threshold">–ü–æ—Ä—ñ–≥ –¥–æ–≤—ñ—Ä–∏ (–∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è:
                65):</label>
            <input type="number" id="url_confidence_threshold" name="url_confidence_threshold" value="65" min="0"
                   max="100">
        </div>

        <div class="form-group">
            <label for="pre_process_file" data-lang-key="pre_process_file">–ü—Ä–µ –ø—Ä–æ—Ü–µ—Å—Å—ñ–Ω–≥ —Ñ–∞–π–ª—É:</label>
            <select id="url_pre_process_file" name="pre_process_file" class="select-dropdown">
                <option value="false" data-lang-key="pre_process_file-false">–ù—ñ</option>
                <option value="true" data-lang-key="pre_process_file-true">–¢–∞–∫</option>
            </select>
        </div>

        <div class="form-group">
            <label for="url_model" data-lang-key="url-model">–ú–æ–¥–µ–ª—å–∫–∞:</label>
            <select id="url_model" name="url_model" class="select-dropdown">
                <option value="tiny" data-lang-key="url-model-tiny">–ö—Ä–∏—Ö—ñ—Ç–∫–∞</option>
                <option value="base" data-lang-key="url-model-base">–ë–∞–∑–æ–≤–∞</option>
                <option value="small" data-lang-key="url-model-small">–ú–∞–ª–µ–Ω—å–∫–∞</option>
                <option value="medium" data-lang-key="url-model-medium">–°–µ—Ä–µ–¥–Ω—è</option>
                <option value="large" data-lang-key="url-model-large">–í–µ–ª–∏–∫–∞</option>
                <option value="large-v2" data-lang-key="url-model-large-v2">–í–µ–ª–∏–∫–∞ v2</option>
                <option value="large-v3" data-lang-key="url-model-large-v3">–í–µ–ª–∏–∫–∞ v3</option>
                <option value="large-v3-turbo" data-lang-key="url-model-large-v3-turbo">–í–µ–ª–∏–∫–∞ v3 Turbo</option>
                <option value="turbo" data-lang-key="url-model-turbo">–¢—É—Ä–±–æ</option>
            </select>
        </div>

        <button type="submit" class="btn-submit" data-lang-key="transcribe-button">–¢—Ä–∞–Ω—Å–∫—Ä–∏–±—É–≤–∞—Ç–∏</button>
    </form>

    <!-- Reconstruction Form -->
    <form id="reconstruct-form" class="tab-content form-card" enctype="application/json">
        <div class="form-group">
            <label for="reconstruction_text" data-lang-key="reconstruction-text">–¢–µ–∫—Å—Ç –¥–ª—è —Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó:</label>
            <textarea id="reconstruction_text" name="reconstruction_text" required
                      placeholder="–í—Å—Ç–∞–≤—Ç–µ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–æ–≤–∞–Ω–∏–π —Ç–µ–∫—Å—Ç —Ç—É—Ç..."></textarea>
        </div>

        <div class="form-group">
            <label for="reconstruction_template" data-lang-key="reconstruction-template">–®–∞–±–ª–æ–Ω —Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó:</label>
            <textarea id="reconstruction_template" name="reconstruction_template" required
                      placeholder="–û–ø–∏—à—ñ—Ç—å —Ñ–æ—Ä–º–∞—Ç –∞–±–æ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è —Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó..."></textarea>
        </div>

        <div class="form-group">
            <label for="max_length" data-lang-key="max-length">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ –¥–æ–≤–∂–∏–Ω–∞ (–∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è: 1500):</label>
            <input type="number" id="max_length" name="max_length" value="1500" min="50" max="5000">
        </div>

        <div class="form-group">
            <label for="model_id" data-lang-key="model-id">–ú–æ–¥–µ–ª—å–∫–∞:</label>
            <select id="model_id" name="model_id" class="select-dropdown">
                <option value="google/gemma-2-2b-it" data-lang-key="model-gemma-2b">Gemma2 -2B</option>
                <option value="google/gemma-2-9b-it" data-lang-key="model-gemma-9b">Gemma2 -9B</option>
            </select>
        </div>

        <button type="submit" class="btn-submit" data-lang-key="reconstruct-button">–†–µ–∫–æ–Ω—Å—Ç—Ä—É—é–≤–∞—Ç–∏</button>
    </form>

    <div class="result-section">
        <h2 class="section-title" data-lang-key="result-title">–†–µ–∑—É–ª—å—Ç–∞—Ç</h2>
        <p id="loading" class="loading" data-lang-key="processing">–û–±—Ä–æ–±–∫–∞ –∑–∞–ø–∏—Ç—É...</p>
        <div id="result" class="result-content"></div>
    </div>
</div>

<script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>